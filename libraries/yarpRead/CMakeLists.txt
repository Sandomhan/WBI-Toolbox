# Copyright (C) 2013 CoDyCo
# Author: Francesco Romano
# CopyPolicy: Released under the terms of the GNU GPL v2.0.

cmake_minimum_required(VERSION 2.8.11)
PROJECT(yarpRead)

SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${ICUB_LINK_FLAGS}")

set(SRC src/yarpRead.cpp)
set(HEADERS include/yarpRead.h)

source_group("Source Files" FILES ${SRC})
source_group("Header Files" FILES ${HEADERS})

include_directories(${PROJECT_SOURCE_DIR}/include)
include_directories("${Matlab_ROOT_DIR}/simulink/include")
include_directories("${Matlab_ROOT_DIR}/extern/include")
include_directories(${Matlab_INCLUDE_DIRS})
include_directories(${YARP_INCLUDE_DIRS})

#Specify preprocessor flag for MATLAB MEX FILES Compilation.
add_definitions(-DMATLAB_MEX_FILE)

#MATLAB_MEXFILE_EXT is generated by FindMatlab.cmake
set(SFUNCTION_SUFFIX ${Matlab_MEX_EXTENSION})

#Adding files used for the generation of the dynamic library
matlab_add_mex(
         NAME ${PROJECT_NAME}
         SRC ${SRC} ${HEADERS}
         LINK_TO ${YARP_LIBRARIES}
     )

install(TARGETS ${PROJECT_NAME} DESTINATION mex)
